# Online Chat Service 

![Python](https://img.shields.io/badge/Python-3.13.2-blue)
![Streamlit](https://img.shields.io/badge/UI-Streamlit-red) 
![Docker](https://img.shields.io/badge/Container-Docker-blue)
![GitHub Actions](https://img.shields.io/badge/CI-GitHub_Actions-black?logo=githubactions&logoColor=white)
![Build Status](https://img.shields.io/badge/build-success-brightgreen)
[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](./LICENSE)


<br>

### ç‹¬è‡ªãƒ—ãƒ­ãƒˆã‚³ãƒ«ãƒ»æš—å·é€šä¿¡ãƒ»ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ãƒ»ã‚½ã‚±ãƒƒãƒˆé€šä¿¡ã«ã‚ˆã‚‹ã‚°ãƒ«ãƒ¼ãƒ—ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒª

### ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆã‹ã‚‰å®Ÿè£…ã€DockeråŒ–ã€Github Actionsã®è‡ªå‹•ãƒ†ã‚¹ãƒˆã€Qiitaã§ã®ç™ºä¿¡ã¾ã§å¯¾å¿œ

<br>

## â­ ãƒ‡ãƒ¢å‹•ç”»

<br>

### ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ä½œæˆã¨ä¼šè©±ã®æµã‚Œã‚’ç¢ºèªã§ãã‚‹ãƒ‡ãƒ¢å‹•ç”»

<br>

https://github.com/user-attachments/assets/3923c939-72fe-4236-9f2b-3a75e9b86fcc
  
<br>


## **ğŸ“ ã‚µãƒ¼ãƒ“ã‚¹ç´¹ä»‹ã¨å°å…¥ã‚¬ã‚¤ãƒ‰**



- [ã‚µãƒ¼ãƒ“ã‚¹ã®ç‰¹å¾´ãƒ»é–‹ç™ºã®ç›®çš„](#ã‚µãƒ¼ãƒ“ã‚¹ã®ç‰¹å¾´ãƒ»é–‹ç™ºã®ç›®çš„)

- [ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †](#ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †)

- [åŸºæœ¬çš„ãªä½¿ã„æ–¹](#åŸºæœ¬çš„ãªä½¿ã„æ–¹)

<br>

## **ğŸ› ï¸ æŠ€è¡“æ§‹æˆ**



- [ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®æ§‹æˆå›³](#ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®æ§‹æˆå›³)

- [ä½¿ç”¨æŠ€è¡“](#ä½¿ç”¨æŠ€è¡“)

- [ã‚¯ãƒ©ã‚¹æ§‹æˆ ã¨ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚¯ãƒ©ã‚¹æ§‹æˆã¨ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)

- [GitHub Actionsã«ã‚ˆã‚‹è‡ªå‹•ãƒ†ã‚¹ãƒˆ](#è‡ªå‹•ãƒ†ã‚¹ãƒˆã¨ci-cdæ§‹æˆ)



<br>

## **ğŸ’¡ é–‹ç™ºã®æŒ¯ã‚Šè¿”ã‚Šã¨å±•æœ›**



- [è¨­è¨ˆä¸Šã®ã“ã ã‚ã‚Š](#è¨­è¨ˆä¸Šã®ã“ã ã‚ã‚Š)

- [è‹¦åŠ´ã—ãŸç‚¹](#è‹¦åŠ´ã—ãŸç‚¹)

- [è¿½åŠ äºˆå®šã®æ©Ÿèƒ½](#è¿½åŠ äºˆå®šã®æ©Ÿèƒ½)

<br>

## **ğŸ“š å‚è€ƒæƒ…å ±ãƒ»ãƒ©ã‚¤ã‚»ãƒ³ã‚¹**



- [Qiitaã§ã®ç™ºä¿¡ : é–‹ç™ºã‚¹ãƒˆãƒ¼ãƒªãƒ¼](#qiita-seisaku-katei-no-kaisetsu-ki)

- [å‚è€ƒæ–‡çŒ®](#å‚è€ƒæ–‡çŒ®)

- [ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æƒ…å ±](#ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æƒ…å ±)

<br>

---

## <a id="ã‚µãƒ¼ãƒ“ã‚¹ã®ç‰¹å¾´ãƒ»é–‹ç™ºã®ç›®çš„"></a> ğŸ“ ã‚µãƒ¼ãƒ“ã‚¹ã®ç‰¹å¾´ãƒ»é–‹ç™ºã®ç›®çš„

<br>

###  ã‚µãƒ¼ãƒ“ã‚¹ã®å…¨ä½“åƒ

- ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€**ã‚°ãƒ«ãƒ¼ãƒ—ãƒãƒ£ãƒƒãƒˆãŒã§ãã‚‹ã‚µãƒ¼ãƒ“ã‚¹**ã§ã™ã€‚

- ãƒ›ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãŒãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ ã‚’ä½œæˆã—ã€ã‚²ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãŒå…¥å®¤ã™ã‚‹ã“ã¨ã§ã‚°ãƒ«ãƒ¼ãƒ—ãƒãƒ£ãƒƒãƒˆãŒã§ãã¾ã™ã€‚


<br>

###  ã§ãã‚‹ã“ã¨

<div style="height:8px;"></div>

- **ãƒ«ãƒ¼ãƒ ä½œæˆãƒ»å‚åŠ **  

  ãƒ›ã‚¹ãƒˆãŒæ–°è¦ãƒ«ãƒ¼ãƒ ã‚’ä½œæˆã€ã‚²ã‚¹ãƒˆã¯æ—¢å­˜ãƒ«ãƒ¼ãƒ ã«å‚åŠ 

- **åŒæ™‚æ¥ç¶š**
  
  ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã«ã‚ˆã£ã¦ã€è¤‡æ•°ã®ãƒ«ãƒ¼ãƒ ã§è¤‡æ•°ã®ãƒ¦ãƒ¼ã‚¶ãŒåŒæ™‚ã«ãƒãƒ£ãƒƒãƒˆå¯èƒ½

- **è‡ªå‹•é€€å‡º**  

  5åˆ†é–“æ“ä½œãŒãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªå‹•çš„ã«ãƒ«ãƒ¼ãƒ ã‹ã‚‰é€€å‡º


<br>


###  ä½œæˆã®ãã£ã‹ã‘

<div style="height:8px;"></div>

1. **èª²é¡Œæ„è­˜**

     ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«é ¼ã‚‰ãšã«ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é€šä¿¡ã‚„æš—å·æŠ€è¡“ã‚’è‡ªåŠ›ã§å®Ÿè£…ã™ã‚‹ã“ã¨ã§ç†è§£ã‚’æ·±ã‚ã‚‹ãŸã‚

2. **è§£æ±ºã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**

     `TCP/UDPé€šä¿¡`ã€`RSAï¼‹AESæš—å·`ã€`ç‹¬è‡ªãƒ—ãƒ­ãƒˆã‚³ãƒ«`ã€`ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰`ã«ã‚ˆã£ã¦ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã‚’è‡ªåŠ›ã§æ§‹ç¯‰

3. **å¾—ã‚‰ã‚ŒãŸå­¦ã³**

      é€šä¿¡ãƒ»æš—å·ãƒ»ä¸¦åˆ—å‡¦ç†ã‚’å«ã‚€ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆã¨å®Ÿè£…ã€`DockeråŒ–`ã€`GitHub Actions`ã«ã‚ˆã‚‹è‡ªå‹•ãƒ†ã‚¹ãƒˆã®çµŒé¨“

<br>

---

## <a id="ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †"></a> ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

<br>

### 1. å‰ææ¡ä»¶

ä»¥ä¸‹ã‚’äº‹å‰ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„

- [Python 3.8ä»¥ä¸Š](https://www.python.org/downloads/)

- [PyCryptodome](https://www.pycryptodome.org/)

- [Streamlit](https://streamlit.io/)

- [Git](https://git-scm.com/)

- [Docker](https://docs.docker.com/get-docker/)


  
<br>

### 2. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³

ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å®Ÿè¡Œã—ã¾ã™

```bash
git clone git@github.com:BackendExplorer/Online-Chat.git
```
```bash
cd Online-Chat
```

<br>

---

## <a id="åŸºæœ¬çš„ãªä½¿ã„æ–¹"></a>ğŸ§‘â€ğŸ’» åŸºæœ¬çš„ãªä½¿ã„æ–¹

<br>

### 1. ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•

Docker Desktopã‚’èµ·å‹•ã—ãŸã‚‰ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ã„ã¦ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã¾ã™ã€‚


```bash
docker-compose up
```

<br>


http://localhost:8501 ã§ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã§ã™ã€‚

ä»¥ä¸‹ã®ã‚ˆã†ã«è¤‡æ•°ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’èµ·å‹•ã™ã‚‹ã“ã¨ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼åŒå£«ãŒãƒãƒ£ãƒƒãƒˆã®ã‚„ã‚Šå–ã‚ŠãŒã§ãã¾ã™

<br>

| ãƒ›ã‚¹ãƒˆ | ã‚²ã‚¹ãƒˆ |
|:-------:|:--------:|
|<br><img src="https://github.com/user-attachments/assets/64532563-e7fa-4083-8d7f-ad61812931ff" width="100%" /> |<br><img src="https://github.com/user-attachments/assets/927afed6-981e-426f-ac18-460bf4c83aee" width="100%" /> |

<br>


### 3. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ“ä½œæ‰‹é †

```mermaid
flowchart TD
%%â”€â”€â”€ ãƒãƒ¼ãƒ‰å®šç¾© â”€â”€â”€
Start([ã‚¹ã‚¿ãƒ¼ãƒˆ])
é¸æŠ["ãƒ¦ãƒ¼ã‚¶ãƒ¼åã‚’å…¥åŠ›"]
ãƒ«ãƒ¼ãƒ åå…¥åŠ›[ãƒ«ãƒ¼ãƒ åã‚’å…¥åŠ›]
ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¨­å®š[ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’è¨­å®š]
ãƒ«ãƒ¼ãƒ ä¸€è¦§[ãƒ«ãƒ¼ãƒ ä¸€è¦§ã‹ã‚‰é¸æŠ]
ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›[ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›]
ãƒãƒ£ãƒƒãƒˆä¸­[ãƒãƒ£ãƒƒãƒˆä¸­]
è‡ªå‹•é€€å‡º[è‡ªå‹•é€€å‡º]
End([çµ‚äº†])

%%â”€â”€â”€ ãƒ•ãƒ­ãƒ¼å®šç¾© â”€â”€â”€
Start --> é¸æŠ
é¸æŠ -- ä½œæˆ --> ãƒ«ãƒ¼ãƒ åå…¥åŠ› --> ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¨­å®š --> ãƒãƒ£ãƒƒãƒˆä¸­
é¸æŠ -- å‚åŠ  --> ãƒ«ãƒ¼ãƒ ä¸€è¦§ --> ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ› --> ãƒãƒ£ãƒƒãƒˆä¸­
ãƒãƒ£ãƒƒãƒˆä¸­ -->|5åˆ†é–“ç„¡æ“ä½œ| è‡ªå‹•é€€å‡º --> End
```

<br>

---


<div style="font-size:120%; line-height:1.6;">
  
## <a id="ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®æ§‹æˆå›³"></a>âš™ï¸ ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®æ§‹æˆå›³

```mermaid
sequenceDiagram
    autonumber
    participant Compose as Docker-Compose
    participant Docker as Docker ãƒ‡ãƒ¼ãƒ¢ãƒ³
    participant ClientContainer as ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ³ãƒ†ãƒŠ
    participant ServerContainer as ã‚µãƒ¼ãƒã‚³ãƒ³ãƒ†ãƒŠ

    %% ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•ãƒ•ãƒ­ãƒ¼
    Compose ->> Docker: Dockerfileã‹ã‚‰ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰
    Docker ->> ServerContainer: ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹• (server.py)
    Docker ->> ClientContainer: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹• (client.py)

    %% ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸äº¤æ›
    ClientContainer ->> ServerContainer: TCPæ¥ç¶šï¼‹RSA/AESéµäº¤æ›
    ServerContainer -->> ClientContainer: ãƒˆãƒ¼ã‚¯ãƒ³ï¼ãƒ«ãƒ¼ãƒ ä¸€è¦§å¿œç­”
    ClientContainer ->> ServerContainer: UDPé€šä¿¡ï¼ˆAESæš—å·åŒ–ï¼‰
    ServerContainer -->> ClientContainer: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆ

    %% ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå†…ãƒ•ãƒ­ãƒ¼ (ã‚³ãƒ³ãƒ†ãƒŠå†…)
    note right of ServerContainer: ãƒ«ãƒ¼ãƒ ç®¡ç†ãƒ»ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆç›£è¦–ã‚’å¸¸æ™‚å®Ÿè¡Œ
    note over Compose: docker-compose up ã§ä¸€ç™ºèµ·å‹•
    

```

<img width="789" alt="ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2025-05-27 9 42 55" src="https://github.com/user-attachments/assets/7eb0a366-3bc1-4d2d-8211-ecfcbcfcd3ff" />


---


## <a id="ä½¿ç”¨æŠ€è¡“"></a>ğŸ§° ä½¿ç”¨æŠ€è¡“

<br>

### 1. æŠ€è¡“é¸å®šã®ç†ç”±

- **`Python`**

  è±Šå¯Œãªæ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨é«˜ã„å¯èª­æ€§ã«ã‚ˆã£ã¦ã€è¤‡é›‘ãªã‚·ã‚¹ãƒ†ãƒ ã‚’åŠ¹ç‡çš„ã«å®Ÿè£…ã™ã‚‹ãŸã‚

- **`TCPã‚½ã‚±ãƒƒãƒˆ`**

  ãƒ«ãƒ¼ãƒ å‚åŠ ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ãªã©ã€ç¢ºå®Ÿãªãƒ‡ãƒ¼ã‚¿è»¢é€ãŒå¿…è¦ãªå‡¦ç†ã«åˆ©ç”¨ã™ã‚‹ãŸã‚

- **`UDPã‚½ã‚±ãƒƒãƒˆ`**

  ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ãªã©ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§ã‚’é‡è¦–ã™ã‚‹é€šä¿¡ã«åˆ©ç”¨ã™ã‚‹ãŸã‚

- **`ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æš—å·æ–¹å¼`**

  å¤§é‡ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒã‚µãƒ¼ãƒã«æ¥ç¶šã—ãŸã¨ãã€å®‰å…¨æ€§ã‚’ç¢ºä¿ã—ã¤ã¤é€šä¿¡åŠ¹ç‡ã‚’ç¶­æŒã™ã‚‹ãŸã‚

- **`ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰`**

  ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã”ã¨ã®ä¸¦è¡Œå‡¦ç†ã‚’è»½é‡ã«è¡Œã†ãŸã‚

- **`Streamlit`**

  Pythonã®ã¿ã§æ‰‹è»½ã«Web UIã‚’æ§‹ç¯‰ã§ãã‚‹ãŸã‚ã€é–‹ç™ºåŠ¹ç‡ã‚’é‡è¦–ã—ã¦æ¡ç”¨


<br>

### 2.  æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã¨ é–‹ç™ºç’°å¢ƒ ã®å…¨ä½“åƒ

<br>

| ã‚«ãƒ†ã‚´ãƒª       | æ¡ç”¨æŠ€è¡“ ã¨ ä½¿ç”¨ãƒ„ãƒ¼ãƒ«                                                                                     ã€€ã€€|
|----------------|----------------------------------------------------------------------------------------------------------------------|
| é–‹ç™ºè¨€èª       | ![Python](https://img.shields.io/badge/Python-3.13.2-blue) <br>æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªä½¿ç”¨ï¼š`socket`, `threading`, `logging`, `time`, `sys` |
| é€šä¿¡æŠ€è¡“       | ![TCP](https://img.shields.io/badge/Protocol-TCP-blue) ![UDP](https://img.shields.io/badge/Protocol-UDP-blue) <br>ç‹¬è‡ªãƒ—ãƒ­ãƒˆã‚³ãƒ«TCRPï¼ˆTalk Chat Room Protocolï¼‰ã‚’ç”¨ã„ãŸé€šä¿¡è¨­è¨ˆ |
| æš—å·æŠ€è¡“       | ![PyCryptodome](https://img.shields.io/badge/Encryption-PyCryptodome-blue) <br>ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰æš—å·æ–¹å¼ (RSAï¼‹AES) ã§é€šä¿¡
| ä¸¦åˆ—å‡¦ç†       | ![Threading](https://img.shields.io/badge/Concurrency-Threading-yellow) <br>ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã«ã‚ˆã‚‹ä¸¦åˆ—å‡¦ç†                      |
| UIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | ![Streamlit](https://img.shields.io/badge/UI-Streamlit-red) <br>Webãƒ™ãƒ¼ã‚¹ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ç°¡æ˜“ã«æ§‹ç¯‰ |
| é–‹ç™ºç’°å¢ƒ       | ![macOS](https://img.shields.io/badge/OS-macOS-lightgrey)&nbsp;&nbsp;&nbsp;&nbsp;![VSCode](https://img.shields.io/badge/Editor-VSCode-blue) |
| ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç† | ![Git](https://img.shields.io/badge/VersionControl-Git-orange)&nbsp;&nbsp;&nbsp;&nbsp;![GitHub](https://img.shields.io/badge/Repo-GitHub-black) |
| ã‚¤ãƒ³ãƒ•ãƒ© | ![Docker](https://img.shields.io/badge/Container-Docker-blue) ![GitHub Actions](https://img.shields.io/badge/CI-GitHub_Actions-black?logo=githubactions&logoColor=white) |
| æç”»ãƒ„ãƒ¼ãƒ«     | ![Mermaid](https://img.shields.io/badge/Diagram-Mermaid-green)&nbsp;&nbsp;&nbsp;&nbsp;![LaTeX](https://img.shields.io/badge/Doc-LaTeX-9cf) |


<br>

---

## <a id="ã‚¯ãƒ©ã‚¹æ§‹æˆã¨ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£"></a>ğŸ“Œ ã‚¯ãƒ©ã‚¹æ§‹æˆ ã¨ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

<br>

### <a id="server.py ã®ã‚¯ãƒ©ã‚¹å›³"></a> [ã‚µãƒ¼ãƒãƒ—ãƒ­ã‚°ãƒ©ãƒ ](https://github.com/BackendExplorer/Online-Chat-Service/blob/main/server.py) ã®ã‚¯ãƒ©ã‚¹å›³

<br>

```mermaid
%%{init: {'themeVariables': {'scale': 0.3}}}%%
classDiagram
direction LR

TCPServer -- UDPServer

class TCPServer {
    - HEADER_MAX_BYTE: int
    - TOKEN_MAX_BYTE: int
    - server_address: str
    - server_port: int
    - sock: socket
    - room_members_map: dict
    - clients_map: dict
    + __init__(server_address: str, server_port: int)
    + start_tcp_server(): None
    - accept_tcp_connections(): None
    - handle_client_request(connection: socket, client_address: tuple): None
    - decode_message(data: bytes): tuple
    - register_client(token: bytes, client_address: tuple, room_name: str, payload: str, operation: int): None
    - create_room(connection: socket, room_name: str, payload: str, token: bytes): None
    - join_room(connection: socket, room_name: str, payload: str, token: bytes): None
}

class UDPServer {
    - server_address: str
    - server_port: int
    - room_members_map: dict
    - clients_map: dict
    - sock: socket
    + __init__(server_address: str, server_port: int)
    + start_udp_server(): None
    - handle_messages(): None
    - decode_message(data: bytes): tuple
    - broadcast_message(room_name: str, message: str): None
    - remove_inactive_clients(): None
    - disconnect_inactive_client(client_token: bytes, client_info: list): None
}
```
<br>


### <a id="client.py ã®ã‚¯ãƒ©ã‚¹å›³"></a> [ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ](https://github.com/BackendExplorer/Online-Chat-Service/blob/main/client.py) ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³

<br>


```mermaid
graph TD

%% ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©
classDef ui fill:#fff8e1,stroke:#f9a825,stroke-width:2px
classDef application fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px
classDef infra fill:#fce4ec,stroke:#c2185b,stroke-width:2px
classDef packet fill:#e3f2fd,stroke:#1976d2,stroke-width:2px

subgraph Entry Point
  main["main.py"]
  class main ui
end

subgraph Application
  app["TCPClient / UDPClient"]
  class app application
end

subgraph Crypto
  enc["Encryption"]
  sock["EncryptedSocket"]
  class enc,sock infra
end

subgraph Input Handling
  handler["InputHandler"]
  class handler packet
end

main --> app
app  --> enc
app  --> sock
app  --> handler



```
 
<br>

## <a id="è‡ªå‹•ãƒ†ã‚¹ãƒˆã¨ci-cdæ§‹æˆ"></a>ğŸ” GitHub Actionsã«ã‚ˆã‚‹è‡ªå‹•ãƒ†ã‚¹ãƒˆ

<br>

<ul>
  <li>
    æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ GitHub Actions ã«ã‚ˆã‚‹ CI ã‚’æ§‹ç¯‰ã—ã€push/PR æ™‚ã«ä»¥ä¸‹ã‚’è‡ªå‹•å®Ÿè¡Œã—ã¾ã™ã€‚
    
  </li>
</ul>

<br>



```mermaid
sequenceDiagram
    autonumber
    participant Dev as é–‹ç™ºè€…
    participant GitHub as GitHubãƒªãƒã‚¸ãƒˆãƒª
    participant CI as GitHub Actionsï¼ˆCIï¼‰
    participant Compose as Docker Compose

    Dev ->> GitHub: ã‚³ãƒ¼ãƒ‰ã‚’ push / PR ä½œæˆ
    GitHub ->> CI: CIãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ï¼ˆci.ymlï¼‰ã‚’èµ·å‹•
    CI ->> CI: Docker Buildx ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— & ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰
    CI ->> Compose: docker compose up -d
    Compose -->> CI: ã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•ç¢ºèª
    CI ->> CI: sleep 10ï¼ˆåˆæœŸåŒ–å¾…æ©Ÿï¼‰
    CI ->> Compose: docker compose psï¼ˆçŠ¶æ…‹ç¢ºèªï¼‰
    CI ->> Compose: docker compose downï¼ˆå¾Œå‡¦ç†ï¼‰
```

<br>

---

## <a id="è¨­è¨ˆä¸Šã®ã“ã ã‚ã‚Š"></a>ğŸŒŸ è¨­è¨ˆä¸Šã®ã“ã ã‚ã‚Š

<br>

<ul>
  <li>
    <p>ä»¥ä¸‹ã¯ã€ãƒãƒ£ãƒƒãƒˆãƒ«ãƒ¼ãƒ æ¥ç¶šã®ãŸã‚ã«è¨­è¨ˆã•ã‚ŒãŸ</p>
    <p> <strong>ç‹¬è‡ªãƒ—ãƒ­ãƒˆã‚³ãƒ« TCRPï¼ˆTalk Chat Room Protocolï¼‰</strong> ã®ãƒ‘ã‚±ãƒƒãƒˆæ§‹é€ ã‚’è¡¨ã—ã¾ã™ã€‚</p>
    
  </li>
</ul>




<img width="817" alt="ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ 2025-05-12 13 20 08" src="https://github.com/user-attachments/assets/83c21fdc-5c3f-4253-a5c7-f7a67438ed4f" />

<br><br>

---
## <a id="è‹¦åŠ´ã—ãŸç‚¹"></a> âš ï¸ è‹¦åŠ´ã—ãŸç‚¹

<br>

<ul>
  <li>
    <h3>TCP ã¨ UDP ã®ä¸¦åˆ—åŒ–</h3>
    <p>åˆ¶å¾¡ç³»ã¯ä¿¡é ¼æ€§é‡è¦–ã®TCPã€ãƒãƒ£ãƒƒãƒˆã¯ä½é…å»¶ãªUDPã§åˆ†é›¢ã€‚</p>
    <p><code>TCPServer</code>ã®ã‚¯ãƒ©ã‚¹å¤‰æ•°ã‚’<code>UDPServer</code>ã‹ã‚‰å‚ç…§ã™ã‚‹ã“ã¨ã§ã€UDPå´ã§ã‚‚ãƒ¡ãƒ³ãƒãƒ¼æƒ…å ±ã‚’æ­£ã—ãåŒæœŸã€‚</p>
  </li>
  <br>
  <li>
    <h3>ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã§ãªã„ãƒ¦ãƒ¼ã‚¶ã®æ¤œå‡º ã¨ è‡ªå‹•é€€å‡º</h3>
    <p><code>last_active_time</code>ã‚’ç›£è¦–ã—ã€ä¸€å®šæ™‚é–“ç„¡æ“ä½œã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªå‹•é€€å‡ºã€‚</p>
    <p>ãƒ›ã‚¹ãƒˆé€€å‡ºæ™‚ã¯å…¨å“¡ã«é€šçŸ¥ã‚’è¡Œã„ã€ãƒ«ãƒ¼ãƒ è‡ªä½“ã‚’å‰Šé™¤ã€‚</p>
  </li>
</ul>

<br>

---

## <a id="è¿½åŠ äºˆå®šã®æ©Ÿèƒ½"></a> ğŸ”¥ è¿½åŠ äºˆå®šã®æ©Ÿèƒ½

<br>

<ul>
  
  <li>
    <h3>ã‚µãƒ¼ãƒãƒ¼ã® EC2 ãƒ‡ãƒ—ãƒ­ã‚¤</h3>
    <p>Docker åŒ–ã—ãŸ <code>server.py</code> ã‚’ AWS EC2 ä¸Šã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆçµŒç”±ã§ã®åˆ©ç”¨ã«å¯¾å¿œã—ã¾ã™ã€‚</p>
    <p>è¤‡æ•°ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã®æ¥ç¶šã‚„å‹•ä½œç¢ºèªã‚’é€šã˜ã¦ã€ä¿¡é ¼æ€§ã¨å®‰å®šæ€§ã‚’æ¤œè¨¼ã™ã‚‹äºˆå®šã§ã™ã€‚</p>
  </li>
</ul>

<br>


---
## <a id="qiita-seisaku-katei-no-kaisetsu-ki"></a>âœï¸ Qiitaã§ã®ç™ºä¿¡ : é–‹ç™ºã‚¹ãƒˆãƒ¼ãƒªãƒ¼

<br>

<ul>
  <li>
    <p>å®Ÿè£…ã®èƒŒæ™¯ã‚„è¨­è¨ˆã®å·¥å¤«ã«ã¤ã„ã¦ã€Qiitaè¨˜äº‹ã§è©³ã—ãè§£èª¬ã—ã¦ã„ã¾ã™ã€‚</p>
    <p>
      <a href="https://qiita.com/your-article-link" target="_blank" rel="noopener noreferrer">
        TCPãƒ»UDPÃ—ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ã§ä½œã‚‹ã€ã‚¼ãƒ­ã‹ã‚‰ã®ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªé–‹ç™º
      </a>
    </p>
  </li>
</ul>

<br>

---
## <a id="å‚è€ƒæ–‡çŒ®"></a>ğŸ“— å‚è€ƒæ–‡çŒ®

<br>

### å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [Python socket - ã‚½ã‚±ãƒƒãƒˆé€šä¿¡](https://docs.python.org/3/library/socket.html)

  `TCPãƒ»UDPé€šä¿¡`ã®åŸºæœ¬æ§‹æ–‡ã¨ä½¿ã„æ–¹ã‚’å‚ç…§

- [Python threading - ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰](https://docs.python.org/3/library/threading.html)

  `ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰å‡¦ç†`ï¼ˆThread ã®ç”Ÿæˆãƒ»é–‹å§‹ãƒ»joinï¼‰ã‚’å®Ÿè£…ã™ã‚‹ãŸã‚ã«å‚ç…§

- [PyCryptodome â€” RSA](https://pycryptodome.readthedocs.io/en/latest/src/cipher/oaep.html)

  `RSAå…¬é–‹éµæš—å·`ã®æš—å·åŒ–ãƒ»å¾©å·åŒ–ã®ä»•çµ„ã¿ã‚’ç†è§£ã™ã‚‹ãŸã‚ã«å‚ç…§

- [PyCryptodome â€” AES](https://www.pycryptodome.org/)

  `å…±é€šéµæš—å·æ–¹å¼`ã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ã®æš—å·åŒ–ã®ãŸã‚ã«å‚ç…§

- [Streamlit](https://docs.streamlit.io/)

  `GUI`ã‚’è¿…é€Ÿã«å®Ÿè£…ã™ã‚‹ãŸã‚ã«å‚ç…§
  
<br>

### å‚è€ƒã«ã—ãŸã‚µã‚¤ãƒˆ

- [ä»Šæ›´ãªãŒã‚‰ã‚½ã‚±ãƒƒãƒˆé€šä¿¡ã«å…¥é–€ã™ã‚‹ï¼ˆPythonã«ã‚ˆã‚‹å®Ÿè£…ä¾‹ä»˜ãï¼‰](https://qiita.com/t_katsumura/items/a83431671a41d9b6358f)

- [python ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰ ãƒãƒ«ãƒãƒ—ãƒ­ã‚»ã‚¹](https://qiita.com/Jungle-King/items/1d332a91647a3d996b82)

- [æš—å·åŒ–ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®åŸºæœ¬ã¨å®Ÿè£…ã‚’Pythonã§è©³è§£](https://qiita.com/Leapcell/items/946a00fa060119f67444)

- [ã¿ã‚“ãªãŒæ¬²ã—ãã†ãªDockerãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¾ã¨ã‚](https://qiita.com/ryome/items/ab23eeadf3c2ff6b35bd)

<br>

---

## <a id="ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æƒ…å ±"></a>ğŸ“œ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æƒ…å ±

<br>

<ul>
  <li>
    ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ <a href="https://opensource.org/licenses/MIT" target="_blank">MIT License</a> ã®ã‚‚ã¨ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚<br><br>
    è‡ªç”±ã«åˆ©ç”¨ã€æ”¹å¤‰ã€å†é…å¸ƒãŒå¯èƒ½ã§ã™ãŒã€åˆ©ç”¨ã®éš›ã¯æœ¬ãƒ©ã‚¤ã‚»ãƒ³ã‚¹è¡¨è¨˜ã‚’ä¿æŒã—ã¦ãã ã•ã„ã€‚
  </li>
</ul>

<br>
